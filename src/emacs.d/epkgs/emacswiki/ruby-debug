== Ruby Debug ==

This is a ruby debug mode that's layered on top of inf-ruby.  It adds single-key bindings for easy program control and it reports on the file and line number of the program counter.

== Installation ==

# Download inf-ruby [https://github.com/nonsequitur/inf-ruby nonsequitur's inf-ruby page]
# Download ruby-debug: Lisp:ruby-debug.el
# Save both locally (e.g., ~/.emacs.d/)
# Add to ~/.emacs file:

<pre>
(setq load-path (cons (expand-file-name "~/.emacs.d/") load-path))

; add the following lines for inf-ruby (downloaded separately)
(autoload 'inf-ruby-minor-mode "inf-ruby" "Run an inferior Ruby process" t)
(add-hook 'ruby-mode-hook 'inf-ruby-minor-mode)

(require 'ruby-debug)
</pre>


== Usage ==

*Modes*
|| Mode        || Binding   || Definition||
|| activated   || `C-c C-s' || Starts ruby-debug, enables single-key bindings for debugger control.  E.g., 'n' calls 'rubyd-next'. ||
|| deactivated || `C-c C-n' || Stops ruby-debug, disables single-key bindings. ||


*Single-key bindings*
||Key||Definition||
|| n || next ||
|| i || step (into) ||
|| d || display ||
|| D || undisplay ||
|| s || `rubyd-show-line' ruby-debug command. This will show you the last line evaluated by the ruby debugger.||


=== Debugging in Ruby ===

First, start `inf-ruby' and load all necessary source files.

Then, in the middle of any Ruby code you can use the <code>require 'debug'</code> instruction where you want to stop the execution and start the debugger.

For example:

<pre>
def foo()
    require 'debug'
    print "hi world!"
    print "This is a test! :-)" 
end
</pre>

As soon as you call the `foo' function, ruby will stop at the require instruction starting the debugger and wait for commands.  Try `help' to see a list of available commands.

`C-c C-s' will activate ruby-debug keybindings.

In case you need to evaluate an expression only once or write a command by yourself in the middle of the debugging, you can press `C-c C-n' to deactivate the keybindings (still the functions using the `M-x' are available) and write as usual, then start again using `C-c C-s'.

`C-c C-n' to deactivate the keybindings to resume normal input.

----
RubyLanguage RubyMode
